<script>

String.prototype.replaceAll = function(search, replacement) {
    var target = this;
    return target.replace(new RegExp(search, 'g'), replacement);
};

$(document).ready(function(){

    var i = 1

    var row = '<tr class="tab_noa1">' +
                '<td><select name="crop_XXX">' +
                    '<option value="10 14 15 18">Corn</option>' +
                    '<option value="20 25 26 42">Cotton</option>'  +
                    '<option value="40 42 45 48 14">Soybeans</option>' +
                    '<option value="50 56 58 15 45">Wheat</option>' +
                    '<option value="60 56 26 68">Vegetables</option>' +
                    '<option value="60 61">Ground fruit</option>' +
                    '<option value="70">Orchards</option>' +
                    '<option value="70">Grapes, vineyards</option>' +
                    '<option value="75">Other trees</option>' +
                    '<option value="80 48 18 58">Other grains</option>' +
                    '<option value="90">Other row crops</option>' +
                    '<option value="100">Other crops</option>' +
                    '<option value="110 150">Pasture/hay/forage/grass</option>' +
                '</td>' +
                '<td><select name="stage_XXX">' +
                    '<option value="plant">plant</option>' +
                    '<option value="emergence">emergence</option>' +
                    '<option value="maturity">maturity</option>' +
                    '<option value="harvest">harvest</option>' +
                '</select>' +
                '<td><input name="offset_XXX" type="text" size="5"></td>' +
                '<td><select name="dist_XXX">' +
                    '<option value="ground">uniform</option>' +
                    '<option value="step">step</option>' +
                '<td><input name="window1_XXX" type="text" size="5"></td>' +
                '<td><form id="f1_XXX"><input name="pct1_XXX" type="text" size="5"></td></form>' +
                '<td><input name="window2_XXX" type="text" size="5"></td>' +
                '<td><form id="f2_XXX"><input name="pct2_XXX" type="text" size="5"></td></form>' +
                '<td><select name="method_XXX">' +
                    '<option value="uniform_XXX">ground</option>' +
                    '<option value="step_XXX">foliar</option>' +
                '</select>'+
                '<td><input name="apprate_XXX" type="text" size="5"></td>' +
                '<td><input name="effic_XXX" type="text" size="5"></td>' +
                '</tr>'

    var total = $('#id_noa').val()

    $('tr[id*="noa_header"]').show()

    while (i <= total) {
        $('.tab_app').append(row.replaceAll('XXX', i));
        i = i + 1;
    }

    $('</table>').appendTo('.tab_app');


    $('#id_noa').change(function () {
    	var total = $(this).val()
    	$('tr[id*="noa_header"]').show()

    	while (i <= total) {
            $('.tab_app').append(row.replaceAll('XXX', i));
    		i = i + 1;
    	}

    	while (i-1 > total) {
    		$(".tab_app tr:last").remove();
    		i=i-1
    	}

    	$('</table>').appendTo('.tab_app');
    })

});
</script>

