<style>
    {#datatables font size#}
    td {
        font-size: 13px;
        vertical-align: top;
    }

    .clearButton {
        background: linear-gradient(to bottom, #efaa4a, #ec911c)
    }

    .resetButton {
        background: linear-gradient(to bottom, #898896, #898896)
    }

    table {
        border: 0px solid black;
        border-spacing: 5px;
        border-collapse: separate;
    }

    table > tbody > tr > td {
        text-align: center;
        radius: 5px;
    {#        border: 1px solid black;#} border: none;
        border-radius: 5px;
        box-shadow: 0px 1px 3px black;
    }

    option {
        text-align: center;
    }

    option:hover {
        background: rgba(206, 213, 222, 0.6);
        cursor: pointer;
    }

    select {
        border: none;
    {#        border-radius: 5px;#}{#        box-shadow: 0px 2px 2px black;#}
    }

</style>


<head>

    <!-- jquery -->
    <script src="http://code.jquery.com/jquery-3.1.1.min.js"
            integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>

    <!-- datatables import -->
    <link rel="stylesheet"
          href="https://www.epa.gov/sites/all/libraries/js/datatables/media/css/jquery.dataTables.min.css">
    <script src="https://www.epa.gov/sites/all/libraries/js/datatables/media/js/jquery.dataTables.min.js"></script>

    <!-- range slider -->
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

    <script>
        $(document).ready(function () {
            $('#resetQuery').on("click", function () {
                $('#databaseQuery')[0].reset();

                // reset slider values
                $("#maxLengthSlider").slider("values", [1, 610]);
                $("#raritySlider").slider("values", [1, 10]);
                $("#meanWeightSlider").slider("values", [0, 700]);
                $("#meanLengthSlider").slider("values", [1, 79]);
                $("#maxAgeSlider").slider("values", [1, 25]);

                // reset slider displayed values
                $("#maxLengthValue").val($("#maxLengthSlider").slider("values", 0) + " - " + $("#maxLengthSlider").slider("values", 1));
                $("#rarityValue").val($("#raritySlider").slider("values", 0) + " - " + $("#raritySlider").slider("values", 1));
                $('#meanWeightValue').val($("#meanWeightSlider").slider("values", 0) + " - " + $("#meanWeightSlider").slider("values", 1));
                $('#meanLengthValue').val($("#meanLengthSlider").slider("values", 0) + " - " + $("#meanLengthSlider").slider("values", 1));
                $('#maxAgeValue').val($("#maxAgeSlider").slider("values", 0) + " - " + $("#maxAgeSlider").slider("values", 1));
                return false;
            });

            $('#submitQuery').on("click", function() {
                setTimeout(generateQuery, 200);
            });

        });

        function generateQuery(){

            // Collecting variables
            var scicomname = "sciconname=" + $('#scicomName').val().trim().split(" ").join("_") + "&";
            var group = "group=" + $('#fishGroup').val().toString() + "&";

            var biogeo = $('#native').val().map(function(i){
                if (i === "native_y"){
                    return "native=Y&";
                }
                else if(i === "native_n"){
                    return "native=N&"
                }
            }).toString().replace(',','');
            var benefit = $('#fishuse').val().map(function(i){
                return i + "=1&";
            }).toString().split(",").join("");;
            var tolerance = "tolerance=" + $('#tolerance').val().map(function(i){
                return i;
            }).toString() + "&";
            var rarity = $('#rarityValue').val().split(' - ');
            rarity = "rarity=" + rarity[0] + "_" + rarity[1] + "&";
            var maxage = $('#maxAgeValue').val().split(' - ');
            maxage = "max_age=" + maxage[0] + "_" + maxage[1] + "&";
            var meanw = $('#meanWeightValue').val().split(' - ');
            meanw = "mean_weight=" + meanw[0] + "_" + meanw[1] + "&";
            var meanl = $('#meanLengthValue').val().split(' - ');
            meanl = "mean_length=" + meanl[0] + "_" + meanl[1] + "&";
            var maxl = $('#maxLengthValue').val().split(' - ');
            maxl = "max_length=" + maxl[0] + "_" + maxl[1] + "&";

            var sys = $('#preferedSystem').val().map(function(i){
                return i + "=1&";
            }).toString().split(",").join("");
            var position = $('#waterPosition').val().map(function(i){
                return i + "=1&";
            }).toString().split(",").join("");
            var substrate = $('#substrate').val().map(function(i){
                return i + "=1&";
            }).toString().split(",").join("");
            var habitat = $('#habitatType').val().map(function(i){
                return i + "=1&";
            }).toString().split(",").join("");
            var waterType = $('#waterType').val().map(function(i){
                return i + "=1&";
            }).toString().split(",").join("");
            var thermal = $('#thermal').val().map(function(i){
                return i + "=1&";
            }).toString().split(",").join("");
            var topo = $('#topography').val().map(function(i){
                return i + "=1&";
            }).toString().split(",").join("");

            var queryString = scicomname + group + biogeo + benefit + rarity + maxage + meanw + meanl + maxl +
                sys + position + substrate + habitat + waterType + thermal + topo;
            if(queryString[queryString.length - 1] === '&'){
                queryString = queryString.substring(0, queryString.length - 1 );
            }
            console.log('/pisces/rest/api/v1/fish/properties?' + queryString);
            $.ajax({
                type: "GET",
                url: "/pisces/rest/api/v1/fish/properties? " + queryString,
                success: function(d){

                },
                error: function(d){

                }
            })
        }

    </script>

</head>


<body>

<div class="panel-display panel-1col clearfix">
    <div class="panel-panel panel-col">
        <!--- content div -->
        <div class="col-md-6">
            <div class="pane-content">
                <p>Query the database by searching for species of interest. Select species properties, habitat
                    characteristics, or other features to find fish that meet your criteria.</p>

                <!--- section line -->
                <hr/>
                <form id="databaseQuery">

                    <!-- DROP-DOWN ACCORDIONS-->
                    <ul class="accordion">
                        <!-- taxonomy table -->
                        <li>
                            <a class="accordion-title" href="#pane-3" title="Click to expand description">Taxonomy</a>
                            <div class="accordion-pane" id="pane-3">
                                <table id="taxonomyTable" style="width:100%">
                                    <tbody>
                                    <tr>
                                        <td style="width:50%;"><strong>Scientific/Common Name</strong>
                                            <input id="scicomName" name="scicomName" type="text"
                                                   title="Scientific/Common Name" style="width:100%">
                                            <label for="scicomName"></label>
                                        <td><strong>Group</strong>
                                            <label for="fishGroup"></label>
                                            <select multiple id="fishGroup" style="width: 100%;overflow: overlay;">
                                                <option value="Anchovy">Anchovy</option>
                                                <option value="Black Bass">Black Bass</option>
                                                <option value="Bowfin">Bowfin</option>
                                                <option value="Burbot">Burbot</option>
                                                <option value="Catfish">Catfish</option>
                                                <option value="Cavefish">Cavefish</option>
                                                <option value="Characin">Characin</option>
                                                <option value="Cichlid">Cichlid</option>
                                                <option value="Clupeid">Clupeid</option>
                                                <option value="Cod">Cod</option>
                                                <option value="Darter">Darter</option>
                                                <option value="Drum">Drum</option>
                                                <option value="Eel">Eel</option>
                                                <option value="Flounder">Flounder</option>
                                                <option value="Gar">Gar</option>
                                                <option value="Goby">Goby</option>
                                                <option value="Knifefish">Knifefish</option>
                                                <option value="Lamprey">Lamprey</option>
                                                <option value="Livebearer">Livebearer</option>
                                                <option value="Loach">Loach</option>
                                                <option value="Madtom">Madtom</option>
                                                <option value="Minnow">Minnow</option>
                                                <option value="Mooneye">Mooneye</option>
                                                <option value="Mudminnow">Mudminnow</option>
                                                <option value="Mullet">Mullet</option>
                                                <option value="Needlefish">Needlefish</option>
                                                <option value="Paddlefish">Paddlefish</option>
                                                <option value="Perch">Perch</option>
                                                <option value="Pike">Pike</option>
                                                <option value="Pipefish">Pipefish</option>
                                                <option value="Pirate Perch">Pirate Perch</option>
                                                <option value="Pupfish">Pupfish</option>
                                                <option value="Pygmy Sunfish">Pygmy Sunfish</option>
                                                <option value="Salmonid">Salmonid</option>
                                                <option value="Sculpin">Sculpin</option>
                                                <option value="Silverside">Silverside</option>
                                                <option value="Smelt">Smelt</option>
                                                <option value="Snakehead">Snakehead</option>
                                                <option value="Splitfin">Splitfin</option>
                                                <option value="Stickleback">Stickleback</option>
                                                <option value="Stingray">Stingray</option>
                                                <option value="Sturgeon">Sturgeon</option>
                                                <option value="Suckers">Suckers</option>
                                                <option value="Sunfish">Sunfish</option>
                                                <option value="Surfperch">Surfperch</option>
                                                <option value="Topminnow">Topminnow</option>
                                                <option value="Trout-Perch">Trout-Perch</option>
                                                <option value="White Bass">White Bass</option>
                                                <option value="Whitefish">Whitefish</option>
                                            </select>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>

                            </div>
                        </li>

                        <!-- fish properties-->
                        <li>
                            <a class="accordion-title" href="#pane-1" title="Click to expand description">Fish
                                Properties</a>
                            <div class="accordion-pane" id="pane-1">
                                <!--- fish properties tables -->
                                <table id="fishPropertiesTable" style="width:100%">
                                    <tbody>
                                    <tr>
                                        <td style="width:33%; text-align: center;"><strong>Biogeography</strong>
                                            <select multiple id="native" title="" size="4"
                                                    style="margin: 1px; width:100%;overflow: auto;">
                                                <option value="native_y" title="Intolerant">Native</option>
                                                <option value="native_n" title="Mid-Tolerant">Introduced</option>
                                            </select>
                                        </td>
                                        <td style="width:34%; text-align: center;"><strong>Beneficial Use</strong>
                                            <select multiple id="fishuse" title="" size="4"
                                                    style="margin: 1px; width:100%;overflow: auto;">
                                                <option value="subsistence">Subsistence</option>
                                                <option value="sportfishing">SportFish</option>
                                                <option value="nongame">Non-Game</option>
                                            </select>
                                        </td>
                                        <td style="width:33%; text-align: center;"><strong>Tolerance to
                                            Disturbance/Siltation</strong>
                                            <select multiple id="tolerance" title="" size="4"
                                                    style="margin: 1px; width:100%; overflow: auto;">
                                                <option value="I" title="Intolerant">Intolerant</option>
                                                <option value="M" title="Mid-Tolerant">Mid-Tolerant</option>
                                                <option value="T" title="Tolerant">Tolerant</option>
                                                <option value="U" title="Unspecified">Unspecified</option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width:33%; text-align: center;"><strong>Rarity</strong>
                                            <input type="text" id="rarityValue" readonly
                                                   style="border:0; color:darkblue; font-weight:bold; font-size: 14px; text-align: center;">
                                            <script>
                                                $(function () {
                                                    $("#raritySlider").slider({
                                                        range: true,
                                                        min: 1,
                                                        max: 10,
                                                        values: [1, 10],
                                                        slide: function (event, ui) {
                                                            $("#rarityValue").val(ui.values[0] + " - " + ui.values[1]);
                                                        }
                                                    });
                                                    $("#rarityValue").val($("#raritySlider").slider("values", 0) +
                                                        " - " + $("#raritySlider").slider("values", 1));
                                                });
                                            </script>
                                            <div id="raritySlider" style="margin: 0 20px;"></div>
                                        </td>
                                        <td style="width:33%; text-align: center;"><strong>Max Age (yr)</strong>
                                            <input type="text" id="maxAgeValue" readonly
                                                   style="border:0; color:darkblue; font-weight:bold; font-size: 14px; text-align: center;">
                                            <script>
                                                $(function () {
                                                    $("#maxAgeSlider").slider({
                                                        range: true,
                                                        min: 1,
                                                        max: 25,
                                                        values: [1, 25],
                                                        slide: function (event, ui) {
                                                            $("#maxAgeValue").val(ui.values[0] + " - " + ui.values[1]);
                                                        }
                                                    });
                                                    $('#maxAgeValue').val($("#maxAgeSlider").slider("values", 0) +
                                                        " - " + $("#maxAgeSlider").slider("values", 1));
                                                })
                                            </script>
                                            <div id="maxAgeSlider" style="margin: 0 20px;"></div>
                                        </td>
{#                                        <td style="width:33%; text-align: center;">#}
{#                                        </td>#}
                                    </tr>
                                    <tr>
                                        <td style="width:33%; text-align: center;"><strong>Mean Weight (g)</strong>
                                            <input type="text" id="meanWeightValue" readonly
                                                   style="border:0; color:darkblue; font-weight:bold; font-size: 14px; text-align: center;">
                                            <script>
                                                $(function () {
                                                    $("#meanWeightSlider").slider({
                                                        range: true,
                                                        min: 0,
                                                        max: 700,
                                                        values: [0, 700],
                                                        slide: function (event, ui) {
                                                            $("#meanWeightValue").val(ui.values[0] + " - " + ui.values[1]);
                                                        }
                                                    });
                                                    $('#meanWeightValue').val($("#meanWeightSlider").slider("values", 0) +
                                                        " - " + $("#meanWeightSlider").slider("values", 1));
                                                })
                                            </script>
                                            <div id="meanWeightSlider" style="margin: 0 20px;"></div>
                                        </td>
                                        <td style="width:34%; text-align: center;"><strong>Mean Length (cm)</strong>
                                            <input type="text" id="meanLengthValue" readonly
                                                   style="border:0; color:darkblue; font-weight:bold; font-size: 14px; text-align: center;">
                                            <script>
                                                $(function () {
                                                    $("#meanLengthSlider").slider({
                                                        range: true,
                                                        min: 1,
                                                        max: 79,
                                                        values: [1, 79],
                                                        slide: function (event, ui) {
                                                            $("#meanLengthValue").val(ui.values[0] + " - " + ui.values[1]);
                                                        }
                                                    });
                                                    $('#meanLengthValue').val($("#meanLengthSlider").slider("values", 0) +
                                                        " - " + $("#meanLengthSlider").slider("values", 1));
                                                })
                                            </script>
                                            <div id="meanLengthSlider" style="margin: 0 20px;"></div>
                                        </td>
                                        <td style="width:34%; text-align: center;"><strong>Max Total Length
                                            (cm)</strong>
                                            <input type="text" id="maxLengthValue" readonly
                                                   style="border:0; color:darkblue; font-weight:bold; font-size: 14px; text-align: center;">
                                            <script>
                                                $(function () {
                                                    $("#maxLengthSlider").slider({
                                                        range: true,
                                                        min: 1,
                                                        max: 610,
                                                        values: [1, 610],
                                                        slide: function (event, ui) {
                                                            $("#maxLengthValue").val(ui.values[0] + " - " + ui.values[1]);
                                                        }
                                                    });
                                                    $("#maxLengthValue").val($("#maxLengthSlider").slider("values", 0) +
                                                        " - " + $("#maxLengthSlider").slider("values", 1));
                                                });
                                            </script>
                                            <div id="maxLengthSlider" style="margin: 0 20px;"></div>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </li>

                        <!-- Habitat Preferences (aka watershed characteristics)-->
                        <li>
                            <a class="accordion-title" href="#pane-2" title="Click to expand description">Habitat
                                Preferences</a>
                            <div class="accordion-pane" id="pane-2">
                                <!--- habitat preferences tables -->
                                <table id="habitat" style="width:100%">
                                    <tbody>
                                    <tr>
                                        <td style="width:25%; text-align: center;"><strong>System</strong>
                                            <select multiple id="preferedSystem" title="" style="width:100%;overflow:overlay;" size="6">
                                                <option value="caves" title="Caves">Caves</option>
                                                <option value="springs" title="Springs">Springs</option>
                                                <option value="headwaters" title="Headwaters">Headwaters</option>
                                                <option value="creeks" title="Creeks">Creeks</option>
                                                <option value="small_riv" title="Small Rivers">Small Rivers</option>
                                                <option value="med_riv" title="Medium Rivers">Medium Rivers</option>
                                                <option value="lge_riv" title="Large Rivers">Large Rivers</option>
                                                <option value="lk_imp_pnd" title="Lakes/Impoundments/Ponds">
                                                    Lakes/Impoundments
                                                </option>
                                                <option value="swp_msh_by" title="Swamp/Marsh">Swamp/Marsh</option>
                                                <option value="coast_ocea" title="Coastal/Ocean">Coastal/Ocean</option>
                                            </select>
                                        </td>
                                        <td style="width:25%; text-align: center;"><strong>Water Position</strong>
                                            <select multiple id="waterPosition" title=""
                                                    style="overflow: auto;width:100%;" size="6">
                                                <option value="benthic" title="Benthic">Benthic</option>
                                                <option value="surface" title="Surface">Surface</option>
                                                <option value="nrshre_litt" title="OpenWater/Pelagic">Open
                                                    Water/Pelagic
                                                </option>
                                                <option value="opnwtr_pelag" title="Nearshore/Littoral">
                                                    Nearshore/Littoral
                                                </option>
                                            </select>
                                        </td>
                                        <td style="width:25%; text-align: center;"><strong>Substrate</strong>
                                            <select multiple id="substrate" title=""
                                                    style="width:100%;overflow: auto;"
                                                    size="6">
                                                <option value="mud_slt_det" title="Mud/Silt/Detritus">Mud/Silt</option>
                                                <option value="sand" title="Sand">Sand</option>
                                                <option value="gravel" title="Gravel">Gravel</option>
                                                <option value="rck_rub_bol" title="Rocks/Rubble/Boulders">Rocks/Rubble
                                                </option>
                                                <option value="vegetation" title="Vegetation">Vegetation</option>
                                                <option value="wdyd_brush" title="Woody Debris">Woody Debris</option>
                                            </select>
                                        </td>
{#                                        <td style="width:25%; text-align: center;">#}
{#                                        </td>#}
                                    </tr>
                                    <tr>
                                        <td style="width:25%; text-align: center;"><strong>Habitat Type</strong>
                                            <select multiple id="habitatType" title=""
                                                    style="overflow: auto;width:100%;" size="3">
                                                <option value="riffles" title="Riffles">Riffles</option>
                                                <option value="run_flopool" title="Runs/Flowing Pools">Runs</option>
                                                <option value="pool_bckwtr" title="Pools/Backwater">Pools/Backwater
                                                </option>
                                            </select>
                                        </td>
                                        <td style="width:25%; text-align: center;"><strong>Water Clarity</strong>
                                            <select multiple id="waterType" title="" style="overflow: auto;width:100%;"
                                                    size="3">
                                                <option value="clearwater" title="Clear water">Clear</option>
                                                <option value="turbidwater" title="Turbid water">Turbid</option>
                                            </select>
                                        </td>
                                        <td style="width:25%; text-align: center;"><strong>Thermal Regime</strong>
                                            <select multiple id="thermal" title=""
                                                    style="overflow: auto;width:100%;" size="3">
                                                <option value="coldwater" title="Cold water">Cold</option>
                                                <option value="coolwater" title="Cool water">Cool</option>
                                                <option value="warmwater" title="Warm water">Warm</option>
                                            </select>
                                        </td>
                                        <td style="width:25%; text-align: center;"><strong>Topography</strong>
                                            <select multiple id="topography" title=""
                                                    style="overflow: auto;width:100%;" size="3">
                                                <option value="lowlands_lgr" title="Lowlands">Lowlands</option>
                                                <option value="upland_hgr" title="Uplands">Uplands</option>

                                            </select>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>

                            </div>
                        </li>
                    </ul><!-- END ACCORDIONS -->
                </form>
                <p style="font-size:12px;">*Note: Use cntr + click to make multiple selections/deselections.</p>
                <!--- line -->
                <hr/>
                <!--- submit query -->
                <tr>
                    <!--- reset -->
                    <div>
                        <input id="submitQuery" name="submit" type="submit" value="Submit Query" onsubmit="return false;"/>
                        <input id="resetQuery" name="reset" type="reset" value="Reset Query"/>
                    </div>

                </tr>
            </div>
        </div>
    </div>
</div>


</body>
</html>